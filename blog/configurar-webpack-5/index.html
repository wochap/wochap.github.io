<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><meta name="theme-color" content="#000000"><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:type" content="website"><meta property="og:locale" content="es_LA">
        <title data-react-helmet="true">Configurar webpack 5</title>
        <meta data-react-helmet="true" name="description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="og:title" content="Configurar webpack 5"><meta data-react-helmet="true" property="og:description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="og:url " content="https://geanmarroquin.com/blog/configurar-webpack-5"><meta data-react-helmet="true" property="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="twitter:site" content="@geanmarroquin"><meta data-react-helmet="true" property="twitter:title" content="Configurar webpack 5"><meta data-react-helmet="true" property="twitter:description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="twitter:creator" content="@geanmarroquin"><meta data-react-helmet="true" property="twitter:domain " content="https://geanmarroquin.com/blog/configurar-webpack-5"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="og:image" content="//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png"><meta data-react-helmet="true" property="article:published_time" content="09-04-2020"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/geanmarroquin"><meta data-react-helmet="true" property="twitter:image" content="//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png"><meta data-react-helmet="true" property="article:tag" content="webpack"><meta data-react-helmet="true" property="article:tag" content="babel">
      <link rel="manifest" href="/app-manifest.json"><link rel="shortcut icon" href="/static/icons-ab289d55/favicon.ico"><link rel="icon" type="image/png" sizes="16x16" href="/static/icons-ab289d55/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/static/icons-ab289d55/favicon-32x32.png"><link rel="icon" type="image/png" sizes="48x48" href="/static/icons-ab289d55/favicon-48x48.png">
        <title data-react-helmet="true">Configurar webpack 5</title>
        <meta data-react-helmet="true" name="description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="og:title" content="Configurar webpack 5"><meta data-react-helmet="true" property="og:description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="og:url " content="https://geanmarroquin.com/blog/configurar-webpack-5"><meta data-react-helmet="true" property="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="twitter:site" content="@geanmarroquin"><meta data-react-helmet="true" property="twitter:title" content="Configurar webpack 5"><meta data-react-helmet="true" property="twitter:description" content="Aprende a configurar webpack 5 con babel, &#xA1;Actualizate Aqu&#xED; Ahora!"><meta data-react-helmet="true" property="twitter:creator" content="@geanmarroquin"><meta data-react-helmet="true" property="twitter:domain " content="https://geanmarroquin.com/blog/configurar-webpack-5"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="og:image" content="//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png"><meta data-react-helmet="true" property="article:published_time" content="09-04-2020"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/geanmarroquin"><meta data-react-helmet="true" property="twitter:image" content="//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png"><meta data-react-helmet="true" property="article:tag" content="webpack"><meta data-react-helmet="true" property="article:tag" content="babel">
      <link rel="manifest" href="/static/icons-ab289d55/manifest.json"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#fff"><meta name="application-name" content="wochap"><link rel="apple-touch-icon" sizes="57x57" href="/static/icons-ab289d55/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/static/icons-ab289d55/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/static/icons-ab289d55/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/static/icons-ab289d55/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/static/icons-ab289d55/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/static/icons-ab289d55/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/static/icons-ab289d55/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/static/icons-ab289d55/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/static/icons-ab289d55/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/static/icons-ab289d55/apple-touch-icon-180x180.png"><link rel="apple-touch-icon" sizes="1024x1024" href="/static/icons-ab289d55/apple-touch-icon-1024x1024.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="wochap"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-640x1136.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-750x1334.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-828x1792.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1125x2436.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1242x2208.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1242x2688.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1536x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1668x2224.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1668x2388.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-2048x2732.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)" href="/static/icons-ab289d55/apple-touch-startup-image-1620x2160.png"><link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-1136x640.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-1334x750.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-1792x828.png"><link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2436x1125.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2208x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2688x1242.png"><link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2048x1536.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2224x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2388x1668.png"><link rel="apple-touch-startup-image" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2732x2048.png"><link rel="apple-touch-startup-image" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)" href="/static/icons-ab289d55/apple-touch-startup-image-2160x1620.png"><link rel="icon" type="image/png" sizes="228x228" href="/static/icons-ab289d55/coast-228x228.png"><meta name="msapplication-TileColor" content="#fff"><meta name="msapplication-TileImage" content="/static/icons-ab289d55/mstile-144x144.png"><meta name="msapplication-config" content="/static/icons-ab289d55/browserconfig.xml"><link rel="yandex-tableau-widget" href="/static/icons-ab289d55/yandex-browser-manifest.json"><link href="/static/css/chunk.app.e2e40783.css" rel="stylesheet"></head><body><script>!function(){if("function"==typeof window.CustomEvent){window.__onThemeChange=function(){},window.__themeChangeEvent="themeChange";var t,n=new CustomEvent(__themeChangeEvent);try{t=localStorage.getItem("theme")}catch(e){}window.__setPreferredTheme=function(e){o(e);try{localStorage.setItem("theme",e)}catch(e){}};var e=window.matchMedia("(prefers-color-scheme: dark)");e.addListener(function(e){window.__setPreferredTheme(e.matches?"dark":"light")}),o(t||(e.matches?"dark":"light"))}function o(e){t&&document.body.classList.contains(t)?document.body.classList.replace(t,e):document.body.classList.add(e),window.__theme=e,t=e,window.__onThemeChange(e),document.dispatchEvent(n)}}()</script><div id="root"><div class="c-app-layout"><div class="c-app-layout__wrapper"><header class="o-wrapper c-site-header is-fixed"><p class="c-site-header__title"><a class href="/">Gean <br> Marroquin</a></p><div class="u-flex u-items-center"><nav class="o-dialog c-site-nav "><ul class="o-dialog__wrapper"><li><a class="o-btn c-site-nav__link" href="/about">Sobre mi</a></li><li><a aria-current="page" class="o-btn c-site-nav__link is-active" href="/blog">Blog</a></li><li><a class="o-btn c-site-nav__link" href="/works">Portafolio</a></li><li><a class="o-btn c-site-nav__link" href="/contact">Cont&#xE1;ctame</a></li></ul></nav><style data-emotion-css="h5zuvg-Button-ThemeToggler">.css-h5zuvg-Button-ThemeToggler{cursor:pointer;font-size:2em;text-align:center;width:46px;color:#9eb3c6;}.css-h5zuvg-Button-ThemeToggler:hover{outline:none;}</style><button type="button" class="u-ml4 css-h5zuvg-Button-ThemeToggler eegbprv0" title="Enable Dark mode" color="#9eb3c6"><i class="u-icon u-block">moon</i></button><button class="o-btn c-site-header__btn-toggle  u-hide@laptop" aria-label="Mostrar navegaci&#xF3;n" type="button"><div class="c-hamburger "><em></em><em></em><em></em></div></button></div></header><article class="u-mb5 u-overflow-hidden"><header class="c-hero" style="background-image:url(//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png)"><div class="o-wrapper c-hero__wrapper"><h1 class="c-hero__title u-caps">Configurar webpack 5</h1><p class="c-hero__date">Abril 2020</p><p class="c-hero__reading-time"><small>&#x2615;&#xFE0F; 7 minutos de lectura</small></p></div></header><div class="o-wrapper o-wrapper--3 c-markdown-body"><p>Configurar webpack puede ser frustrante...<div class="tenor-gif-embed" data-aspect-ratio="1.7785714285714287" data-postid="5384575" data-share-method="host" data-width="100%"><a href="https://tenor.com/view/fuck-work-gif-5384575">Fuckwork Angry GIF</a> from <a href="https://tenor.com/search/fuckwork-gifs">Fuckwork GIFs</a></div><br></p><p>Por ello en esta gu&#xED;a te ense&#xF1;are como configurar <a href="https://webpack.js.org/concepts/" rel="nofollow" target="_blank">webpack 5</a> con babel, si deseas ver la configuraci&#xF3;n final haz click <a href="#configuracion-final">aqu&#xED;</a> y <a href="https://github.com/wochap/setup-webpack-5" rel="nofollow" target="_blank">aqu&#xED;</a> para ir al repo.<blockquote><p>al d&#xED;a de hoy (9 de abril del 2020) <a href="https://webpack.js.org/concepts/hot-module-replacement/" rel="nofollow" target="_blank">HMR (hot module replacement)</a> no funciona con <strong>html-webpack-plugin</strong>, y tambien hay algunos plugins que no funcionaran (por el momento) ya que la API interna cambio bastante en webpack 5</p></blockquote></p><h2 id="nuestra-meta">Nuestra meta</h2><p>Tener un solo archivo de configuraci&#xF3;n <code>webpack.config.js</code> para <code>production</code> y <code>development</code>, configurar <a href="https://babeljs.io/" rel="nofollow" target="_blank">babel</a> para que inserte <a href="https://developer.mozilla.org/es/docs/Glossary/Polyfill" rel="nofollow" target="_blank">polyfills</a> y transforme nuestro c&#xF3;digo JS a JS que entiendan nuestros <code>target browsers</code>.</p><h2 id="requerimientos">Requerimientos</h2><ul><li>Saber lo basico de <a href="https://nodejs.org/" rel="nofollow" target="_blank">NodeJS</a>.</li></ul><h2 id="empecemos">Empecemos</h2><h3 id="pasos-para-configurar-webpack-5">Pasos para configurar webpack 5</h3><ol><li><h4 id="instalar-dependencias">Instalar dependencias</h4><p>Webpack<ul><li>webpack - v5.0.0-beta.13</li><li>webpack-cli - v3.3.11 - <em>permite usar webpack en la terminal</em></li><li>webpack-dev-server - v3.10.3 - <em>crea un servidor express para poder hacer uso de HMR</em></li></ul></p><p>Webpack loaders<ul><li>css-loader - v3.4.2 - <em>permite importar archivos CSS a nuestros JS</em></li><li>postcss-loader - v3.0.0 - <em>permite aplicar plugins de <a href="https://postcss.org/" rel="nofollow" target="_blank">postcss</a> a nuestros CSS</em></li><li>style-loader - v1.1.3 - <em>agrega una etiqueta <code>style</code> en el DOM por cada CSS que importemos en nuestros JS</em></li><li>babel-loader - v8.1.0 - <em>permite aplicar babel a todos nuestros JS</em></li></ul></p><p>Webpack plugins<ul><li>clean-webpack-plugin - v3.0.0 - <em>eliminara la carpeta dist en cada production build</em></li><li>html-webpack-plugin - v4.0.4 - <em>inserta en el archivo html que le indiques todos tus imports (script, style, link, etc)</em></li><li>mini-css-extract-plugin - v0.9.0 - <em>agrega una etiqueta <code>link</code> en el DOM por cada CSS que importemos en nuestros JS</em></li></ul></p><p>Babel<ul><li>@babel/core - v7.9.0</li><li>@babel/plugin-transform-runtime - v7.9.0 - <em>encargado de agregar los polyfills</em></li><li>@babel/preset-env - v7.9.0 - <em>encargado de transformar nuestro c&#xF3;digo JS a JS entendible por nuestros <code>target browsers</code></em></li><li>@babel/runtime-corejs3 - v7.9.2 - <em>modulo que contiene los polyfills</em></li></ul></p><p>Postcss plugins<ul><li>autoprefixer - v9.7.5 - <em>insertara prefijos (-webkit-) segun lo requieran nuestros <code>target browsers</code></em></li></ul><li><h4 id="agregar-nuestros-tasks-en-packagejson">Agregar nuestros tasks en package.json</h4><p>En development, usaremos el comando <code>npm run dev</code> y para production <code>npm run build</code>.<pre><code class="language-json">{
  <span class="hljs-attr">&quot;scripts&quot;</span>: {
    <span class="hljs-attr">&quot;build&quot;</span>: <span class="hljs-string">&quot;webpack --mode production&quot;</span>, <span class="hljs-comment">// corre webpack con la configuracion para production, con ello webpack sera capaz de analizar, comprimir, y quitar c&#xF3;digo innecesario.</span>
    <span class="hljs-attr">&quot;dev&quot;</span>: <span class="hljs-string">&quot;webpack-dev-server --mode development&quot;</span> <span class="hljs-comment">// para hacer uso del famoso HMR necesitamos un servidor en nodejs, webpack-dev-server lo creara por nosotros</span>
  }
}
</code></pre><li><h4 id="crear-nuestro-archivo-browserslistrc">Crear nuestro archivo <a href="https://github.com/browserslist/browserslist#browserslist-" rel="nofollow" target="_blank"><code>.browserslistrc</code></a></h4><p>En este archivo indicamos nuestros <code>target browsers</code>, los navegadores que soportaremos. <a href="https://babeljs.io/docs/en/babel-preset-env" rel="nofollow" target="_blank">Babel</a> y <a href="https://autoprefixer.github.io/" rel="nofollow" target="_blank">Autoprefixer</a> usaran este archivo si lo encuentran en la raiz del proyecto.<pre><code><span class="hljs-comment"># .browserslistrc</span>

<span class="hljs-meta">&gt;</span> <span class="hljs-string">1%</span>
<span class="hljs-attr">last</span> <span class="hljs-string">2 versions</span>
<span class="hljs-attr">not</span> <span class="hljs-string">dead</span>
<span class="hljs-attr">not</span> <span class="hljs-string">IE 11</span>
<span class="hljs-attr">not</span> <span class="hljs-string">IE 10</span>
</code></pre><li><h4 id="crear-nuestro-archivo-babelrc">Crear nuestro archivo <code>.babelrc</code></h4><p>Con esto babel sera capaz de insertar polyfills y transformar JS donde se requiera segun nuestro <code>target browsers</code>.<pre><code class="language-json">{
  <span class="hljs-attr">&quot;presets&quot;</span>: [[<span class="hljs-string">&quot;@babel/preset-env&quot;</span>]],
  <span class="hljs-attr">&quot;plugins&quot;</span>: [
    [
      <span class="hljs-string">&quot;@babel/plugin-transform-runtime&quot;</span>,
      {
        <span class="hljs-attr">&quot;corejs&quot;</span>: <span class="hljs-number">3</span>
      }
    ]
  ]
}
</code></pre><li><h4 id="crear-nuestro-archivo-postcssconfigjs">Crear nuestro archivo <code>postcss.config.js</code></h4><p><code>postcss-loader</code> usara esta configuracion, solo usaremos el plugin de autoprefixer.<pre><code class="language-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">plugins</span>: {
    <span class="hljs-attr">autoprefixer</span>: {},
  },
}
</code></pre><li><h4 id="crear-nuestro-archivo-webpackconfigjs">Crear nuestro archivo <code>webpack.config.js</code></h4><div class="tenor-gif-embed" data-aspect-ratio="1.7744360902255638" data-postid="10383696" data-share-method="host" data-width="100%"><a href="https://tenor.com/view/ahora-si-viene-lo-chido-gif-10383696">Ahora Si GIF</a> from <a href="https://tenor.com/search/ahora-gifs">Ahora GIFs</a></div><br><p>Empezemos por importar algunos modulos, mas <a href="#1-instalar-dependencias">arriba</a> explique que hace cada modulo.<pre><code class="language-js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>)
<span class="hljs-keyword">const</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;html-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> {CleanWebpackPlugin} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;clean-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> MiniCssExtractPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;mini-css-extract-plugin&apos;</span>)
</code></pre></p><p>El archivo <code>webpack.config.js</code> debe exportar un objeto o una funcion devolviendo un objeto, usaremos la segunda, ya que de esta manera podremos saber si estamos en <code>development</code> o <code>production</code>.<pre><code class="language-js"><span class="hljs-keyword">const</span> config = {}
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function">(<span class="hljs-params">env, argv</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;development&apos;</span>) {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> usar style-loader, es lo recomendado para usar HMR</span>
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> habilitar HMR plugin</span>
  }

  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;production&apos;</span>) {
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> insertar `contenthash` en los archivos de salida, esto para tener `long term caching`</span>
    <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> usar MiniCssExtractPlugin, para extraer todo nuestro CSS a un archivo CSS, de lo contrario nuestro CSS quedaria en los archivos JS</span>
  }
  <span class="hljs-keyword">return</span> config
}
</code></pre></p><p>La configuracion en comun que tiene <code>production</code> y <code>development</code> estara en el objeto <code>config</code>.<pre><code class="language-js"><span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// el punto de entrada de nuestra APP, JS que se ejecutara en el BROWSER</span>
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&apos;./src/index.js&apos;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-comment">// el nombre que le daremos al archivo de salida principal</span>
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;main.js&apos;</span>,

    <span class="hljs-comment">// donde se crearan los archivos de salida</span>
    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&apos;dist&apos;</span>),
  },

  <span class="hljs-comment">// configuracion para webpack-dev-server</span>
  <span class="hljs-attr">devServer</span>: {
    <span class="hljs-comment">// abrir la APP en el BROWSER</span>
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// HACK para permitir ver la APP desde otros dispositivos</span>
    <span class="hljs-attr">host</span>: <span class="hljs-string">&apos;0.0.0.0&apos;</span>,

    <span class="hljs-comment">// ver el progreso de compilacion en la consola</span>
    <span class="hljs-attr">progress</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// esto para que todas las URLs que fallen (404) devuelvan nuestro index.html</span>
    <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// para que los errores en consola aparescan en un overlay en el BROWSER</span>
    <span class="hljs-attr">overlay</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-comment">// habilitar HMR</span>
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-comment">// un alias que apunta a la carpeta `src/components`</span>
      <span class="hljs-string">&apos;@components&apos;</span>: path.resolve(__dirname, <span class="hljs-string">&apos;src/components&apos;</span>),
    },
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-comment">// a que archivos afectara esta regla</span>
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,

        <span class="hljs-comment">// los loaders que apliquemos en la regla no afectaran</span>
        <span class="hljs-comment">// a archivos que coincidan con</span>
        exclude: <span class="hljs-regexp">/(node_modules|bower_components)/</span>,

        use: {
          <span class="hljs-comment">// el nombre  del loader que usaremos</span>
          <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;babel-loader&apos;</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-comment">// mejora la velocidad de compilacion</span>
            <span class="hljs-comment">// si en algun momento no se ven reflejados tus cambios</span>
            <span class="hljs-comment">// elimina la carpeta `node_modules/.cache`</span>
            <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-literal">true</span>,
          },
        },
      },
    ],
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> CleanWebpackPlugin(),
    <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
      <span class="hljs-comment">// la ruta donde se encuentra nuestro index.html</span>
      <span class="hljs-comment">// para que HtmlWebpackPlugin lo use</span>
      <span class="hljs-attr">template</span>: <span class="hljs-string">&apos;src/index.html&apos;</span>,
    }),
  ],
}
</code></pre></p><p>Ahora solo falta completar nuestros TODOs<pre><code class="language-js"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function">(<span class="hljs-params">env, argv</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;development&apos;</span>) {
    <span class="hljs-comment">// nuestra regla para poder importar archivos CSS</span>
    config.module.rules.push({
      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,

      <span class="hljs-comment">// el primer loader en aplicarse es el ultimo, en este caso `postcss-loader`</span>
      use: [<span class="hljs-string">&apos;style-loader&apos;</span>, <span class="hljs-string">&apos;css-loader&apos;</span>, <span class="hljs-string">&apos;postcss-loader&apos;</span>],
    })
    config.plugins.push(
      <span class="hljs-comment">// con esto ya habilitamos HMR</span>
      <span class="hljs-keyword">new</span> webpack.HotModuleReplacementPlugin(),
    )
  }

  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;production&apos;</span>) {
    <span class="hljs-comment">// webpack reemplazara [name] con el nombre del archivo que importamos, ///</span>
    <span class="hljs-comment">// [contenthash:8] sera reemplazado por un hash de 8 digitos que cambia segun el contenido del archivo</span>
    <span class="hljs-comment">// aplicar long term caching a los archivos resultantes JS</span>
    config.output.filename = <span class="hljs-string">&apos;static/js/bundle.[name].[contenthash:8].js&apos;</span>
    config.output.chunkFilename = <span class="hljs-string">&apos;static/js/chunk.[name].[contenthash:8].js&apos;</span>

    <span class="hljs-comment">// nuestra regla para extraer los archivos CSSs en sus propios archivos</span>
    config.module.rules.push({
      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
      use: [MiniCssExtractPlugin.loader, <span class="hljs-string">&apos;css-loader&apos;</span>, <span class="hljs-string">&apos;postcss-loader&apos;</span>],
    })
    config.plugins.push(
      <span class="hljs-keyword">new</span> MiniCssExtractPlugin({
        <span class="hljs-comment">// aplicar long term caching a los archivos resultantes CSS</span>
        <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;static/css/bundle.[name].[contenthash:8].css&apos;</span>,
        <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">&apos;static/css/chunk.[name].[contenthash:8].css&apos;</span>,
      }),
    )
  }
  <span class="hljs-keyword">return</span> config
}
</code></pre></p></li></p></li></p></li></p></li></p></li></p></li></ol><p>Con esto ya tienes una configuracion bien estandar, si trabajas con vue puedes continuar <a href="https://vue-loader.vuejs.org/" rel="nofollow" target="_blank">aqu&#xED;</a>, o si trabajas con react agrega este preset <a href="https://babeljs.io/docs/en/babel-preset-react" rel="nofollow" target="_blank">@babel/preset-react</a> a la configuracion de babel.</p><h2 id="configuracion-final">Configuracion final</h2><pre><code class="language-js"><span class="hljs-comment">// webpack.config.js</span>

<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>)
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;webpack&apos;</span>)
<span class="hljs-keyword">const</span> HtmlWebpackPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;html-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> {CleanWebpackPlugin} = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;clean-webpack-plugin&apos;</span>)
<span class="hljs-keyword">const</span> MiniCssExtractPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;mini-css-extract-plugin&apos;</span>)

<span class="hljs-keyword">const</span> config = {
  <span class="hljs-attr">entry</span>: <span class="hljs-string">&apos;./src/index.js&apos;</span>,
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;main.js&apos;</span>,
    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">&apos;dist&apos;</span>),
  },
  <span class="hljs-attr">devServer</span>: {
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">host</span>: <span class="hljs-string">&apos;0.0.0.0&apos;</span>,
    <span class="hljs-attr">progress</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">overlay</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
  },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">&apos;@components&apos;</span>: path.resolve(__dirname, <span class="hljs-string">&apos;src/components&apos;</span>),
    },
  },
  <span class="hljs-attr">module</span>: {
    <span class="hljs-attr">rules</span>: [
      {
        <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
        exclude: <span class="hljs-regexp">/(node_modules|bower_components)/</span>,
        use: {
          <span class="hljs-attr">loader</span>: <span class="hljs-string">&apos;babel-loader&apos;</span>,
          <span class="hljs-attr">options</span>: {
            <span class="hljs-attr">cacheDirectory</span>: <span class="hljs-literal">true</span>,
          },
        },
      },
    ],
  },
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> CleanWebpackPlugin(),
    <span class="hljs-keyword">new</span> HtmlWebpackPlugin({
      <span class="hljs-attr">template</span>: <span class="hljs-string">&apos;src/index.html&apos;</span>,
    }),
  ],
}

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function">(<span class="hljs-params">env, argv</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;development&apos;</span>) {
    config.module.rules.push({
      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
      use: [<span class="hljs-string">&apos;style-loader&apos;</span>, <span class="hljs-string">&apos;css-loader&apos;</span>, <span class="hljs-string">&apos;postcss-loader&apos;</span>],
    })
    config.plugins.push(<span class="hljs-keyword">new</span> webpack.HotModuleReplacementPlugin())
  }

  <span class="hljs-keyword">if</span> (argv.mode === <span class="hljs-string">&apos;production&apos;</span>) {
    config.output.filename = <span class="hljs-string">&apos;static/js/bundle.[name].[contenthash:8].js&apos;</span>
    config.output.chunkFilename = <span class="hljs-string">&apos;static/js/chunk.[name].[contenthash:8].js&apos;</span>
    config.module.rules.push({
      <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
      use: [MiniCssExtractPlugin.loader, <span class="hljs-string">&apos;css-loader&apos;</span>, <span class="hljs-string">&apos;postcss-loader&apos;</span>],
    })
    config.plugins.push(
      <span class="hljs-keyword">new</span> MiniCssExtractPlugin({
        <span class="hljs-attr">filename</span>: <span class="hljs-string">&apos;static/css/bundle.[name].[contenthash:8].css&apos;</span>,
        <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">&apos;static/css/chunk.[name].[contenthash:8].css&apos;</span>,
      }),
    )
  }
  <span class="hljs-keyword">return</span> config
}
</code></pre><h2 id="referencias">Referencias</h2><ul><li><a href="https://www.zzuu666.com/articles/9" rel="nofollow" target="_blank">https://www.zzuu666.com/articles/9</a></li><li><a href="https://webpack.js.org/configuration/mode/#root" rel="nofollow" target="_blank">https://webpack.js.org/configuration/mode/#root</a></li><li><a href="https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching" rel="nofollow" target="_blank">https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching</a></li></ul></div><div class="o-wrapper o-wrapper--3 u-mt5"><div id="disqus_thread"></div></div></article><script type="application/ld+json">{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://geanmarroquin.com/#logo","url":"https://res.cloudinary.com/wochap/image/upload/v1586724454/wochap/android-chrome-384x384.png","caption":"Gean Marroquin","width":"384px","height":"384px"},{"@type":"Person","@id":"https://geanmarroquin.com/about/#person","name":"Gean Marroquin","jobTitle":"JS Developer","url":"https://geanmarroquin.com/about"},{"@type":"Organization","@id":"https://geanmarroquin.com/about/#organization","name":"Gean Marroquin","url":"https://geanmarroquin.com","logo":{"@id":"https://geanmarroquin.com/#logo"}},{"@type":"WebSite","@id":"https://geanmarroquin.com/#website","url":"https://geanmarroquin.com","name":"Inicio | Gean Marroquin","description":"Establecido en Peru, soy Javascript Developer enfocado en la creación de componentes escalables y reusables con vue y react, apasionado y autodidacta.","publisher":{"@id":"https://geanmarroquin.com/about/#organization"}},{"@type":"WebPage","@id":"https://geanmarroquin.com/blog/#webpage","url":"https://geanmarroquin.com/blog","name":"Artículos y tutoriales | Gean Marroquin","description":"Tutoriales sobre desarrollo de aplicaciones web y mobile.","isPartOf":{"@id":"https://geanmarroquin.com/#website"}},{"@type":"BreadcrumbList","@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"name":"Inicio","item":"https://geanmarroquin.com"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://geanmarroquin.com/blog"},{"@type":"ListItem","position":3,"name":"Configurar webpack 5"}]},{"@type":"WebPage","@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#webpage","url":"https://geanmarroquin.com/blog/configurar-webpack-5","name":"Configurar webpack 5","description":"Aprende a configurar webpack 5 con babel, ¡Actualizate Aquí Ahora!","isPartOf":{"@id":"https://geanmarroquin.com/blog/#webpage"},"breadcrumb":{"@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#breadcrumb"}},{"@type":"BlogPosting","@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#post","url":"https://geanmarroquin.com/blog/configurar-webpack-5","description":"Aprende a configurar webpack 5 con babel, ¡Actualizate Aquí Ahora!","datePublished":"2020-04-09T00:00:00+00:00","dateModified":"2020-04-12T00:00:00+00:00","name":"Configurar webpack 5","headline":"Configurar webpack 5","wordCount":1337,"keywords":"webpack, webpack 5, babel, webpack-dev-server","author":{"@id":"https://geanmarroquin.com/about/#person"},"publisher":{"@id":"https://geanmarroquin.com/about/#organization"},"image":{"@type":"ImageObject","@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#image","url":"//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png","caption":"webpack"},"isPartOf":{"@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#webpage"},"mainEntityOfPage":{"@id":"https://geanmarroquin.com/blog/configurar-webpack-5/#webpage"},"inLanguage":{"@type":"Language","name":"Spanish","alternateName":"es"}}]}</script><footer class="o-wrapper u-py3 u-mt-auto"><p class="u-center u-m0 u-muted u-fz-xs">Dise&#xF1;ado con <span class="u-fz-xl">&#x2665;</span> por<!-- --> <a href="https://site.uplabs.com/alisaayeed" target="_blank" rel="noopener noreferrer"><strong>Ali Sayed</strong></a></p></footer></div></div></div><script>window.__INITIAL_STATE__ = {"collections":{"posts":{"items":{"configurar-webpack-5":{"state":{"error":false,"isPending":false,"isFulfilled":true},"frontMatter":{"slug":"configurar-webpack-5","fileName":"configurar-webpack-5","readingTime":"☕️ 7 minutos de lectura","wordCount":1337,"identifier":"blog-1","date":"09-04-2020","dateModified":"12-04-2020","formattedDate":"Abril 2020","imageCaption":"webpack","imageUrl":"//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png","heroImageUrl":"//res.cloudinary.com/wochap/image/upload/v1586536747/wochap/hero/configurando_webpack.png","title":"Configurar webpack 5","description":"Aprende a configurar webpack 5 con babel, ¡Actualizate Aquí Ahora!","tags":["webpack","babel"],"keywords":["webpack","webpack 5","babel","webpack-dev-server"]},"bodyHtml":"<p>Configurar webpack puede ser frustrante...<div class=tenor-gif-embed data-aspect-ratio=1.7785714285714287 data-postid=5384575 data-share-method=host data-width=100%><a href=https://tenor.com/view/fuck-work-gif-5384575>Fuckwork Angry GIF</a> from <a href=https://tenor.com/search/fuckwork-gifs>Fuckwork GIFs</a></div><br><p>Por ello en esta guía te enseñare como configurar <a href=https://webpack.js.org/concepts/ rel=nofollow target=_blank>webpack 5</a> con babel, si deseas ver la configuración final haz click <a href=#configuracion-final>aquí</a> y <a href=https://github.com/wochap/setup-webpack-5 rel=nofollow target=_blank>aquí</a> para ir al repo.<blockquote><p>al día de hoy (9 de abril del 2020) <a href=https://webpack.js.org/concepts/hot-module-replacement/ rel=nofollow target=_blank>HMR (hot module replacement)</a> no funciona con <strong>html-webpack-plugin</strong>, y tambien hay algunos plugins que no funcionaran (por el momento) ya que la API interna cambio bastante en webpack 5</blockquote><h2 id=nuestra-meta>Nuestra meta</h2><p>Tener un solo archivo de configuración <code>webpack.config.js</code> para <code>production</code> y <code>development</code>, configurar <a href=https://babeljs.io/ rel=nofollow target=_blank>babel</a> para que inserte <a href=https://developer.mozilla.org/es/docs/Glossary/Polyfill rel=nofollow target=_blank>polyfills</a> y transforme nuestro código JS a JS que entiendan nuestros <code>target browsers</code>.<h2 id=requerimientos>Requerimientos</h2><ul><li>Saber lo basico de <a href=https://nodejs.org/ rel=nofollow target=_blank>NodeJS</a>.</ul><h2 id=empecemos>Empecemos</h2><h3 id=pasos-para-configurar-webpack-5>Pasos para configurar webpack 5</h3><ol><li><h4 id=instalar-dependencias>Instalar dependencias</h4><p>Webpack<ul><li>webpack - v5.0.0-beta.13<li>webpack-cli - v3.3.11 - <em>permite usar webpack en la terminal</em><li>webpack-dev-server - v3.10.3 - <em>crea un servidor express para poder hacer uso de HMR</em></ul><p>Webpack loaders<ul><li>css-loader - v3.4.2 - <em>permite importar archivos CSS a nuestros JS</em><li>postcss-loader - v3.0.0 - <em>permite aplicar plugins de <a href=https://postcss.org/ rel=nofollow target=_blank>postcss</a> a nuestros CSS</em><li>style-loader - v1.1.3 - <em>agrega una etiqueta <code>style</code> en el DOM por cada CSS que importemos en nuestros JS</em><li>babel-loader - v8.1.0 - <em>permite aplicar babel a todos nuestros JS</em></ul><p>Webpack plugins<ul><li>clean-webpack-plugin - v3.0.0 - <em>eliminara la carpeta dist en cada production build</em><li>html-webpack-plugin - v4.0.4 - <em>inserta en el archivo html que le indiques todos tus imports (script, style, link, etc)</em><li>mini-css-extract-plugin - v0.9.0 - <em>agrega una etiqueta <code>link</code> en el DOM por cada CSS que importemos en nuestros JS</em></ul><p>Babel<ul><li>@babel/core - v7.9.0<li>@babel/plugin-transform-runtime - v7.9.0 - <em>encargado de agregar los polyfills</em><li>@babel/preset-env - v7.9.0 - <em>encargado de transformar nuestro código JS a JS entendible por nuestros <code>target browsers</code></em><li>@babel/runtime-corejs3 - v7.9.2 - <em>modulo que contiene los polyfills</em></ul><p>Postcss plugins<ul><li>autoprefixer - v9.7.5 - <em>insertara prefijos (-webkit-) segun lo requieran nuestros <code>target browsers</code></em></ul><li><h4 id=agregar-nuestros-tasks-en-packagejson>Agregar nuestros tasks en package.json</h4><p>En development, usaremos el comando <code>npm run dev</code> y para production <code>npm run build</code>.<pre><code class=language-json>{\n  <span class=hljs-attr>\"scripts\"</span>: {\n    <span class=hljs-attr>\"build\"</span>: <span class=hljs-string>\"webpack --mode production\"</span>, <span class=hljs-comment>// corre webpack con la configuracion para production, con ello webpack sera capaz de analizar, comprimir, y quitar código innecesario.</span>\n    <span class=hljs-attr>\"dev\"</span>: <span class=hljs-string>\"webpack-dev-server --mode development\"</span> <span class=hljs-comment>// para hacer uso del famoso HMR necesitamos un servidor en nodejs, webpack-dev-server lo creara por nosotros</span>\n  }\n}\n</code></pre><li><h4 id=crear-nuestro-archivo-browserslistrc>Crear nuestro archivo <a href=https://github.com/browserslist/browserslist#browserslist- rel=nofollow target=_blank><code>.browserslistrc</code></a></h4><p>En este archivo indicamos nuestros <code>target browsers</code>, los navegadores que soportaremos. <a href=https://babeljs.io/docs/en/babel-preset-env rel=nofollow target=_blank>Babel</a> y <a href=https://autoprefixer.github.io/ rel=nofollow target=_blank>Autoprefixer</a> usaran este archivo si lo encuentran en la raiz del proyecto.<pre><code><span class=hljs-comment># .browserslistrc</span>\n\n<span class=hljs-meta>></span> <span class=hljs-string>1%</span>\n<span class=hljs-attr>last</span> <span class=hljs-string>2 versions</span>\n<span class=hljs-attr>not</span> <span class=hljs-string>dead</span>\n<span class=hljs-attr>not</span> <span class=hljs-string>IE 11</span>\n<span class=hljs-attr>not</span> <span class=hljs-string>IE 10</span>\n</code></pre><li><h4 id=crear-nuestro-archivo-babelrc>Crear nuestro archivo <code>.babelrc</code></h4><p>Con esto babel sera capaz de insertar polyfills y transformar JS donde se requiera segun nuestro <code>target browsers</code>.<pre><code class=language-json>{\n  <span class=hljs-attr>\"presets\"</span>: [[<span class=hljs-string>\"@babel/preset-env\"</span>]],\n  <span class=hljs-attr>\"plugins\"</span>: [\n    [\n      <span class=hljs-string>\"@babel/plugin-transform-runtime\"</span>,\n      {\n        <span class=hljs-attr>\"corejs\"</span>: <span class=hljs-number>3</span>\n      }\n    ]\n  ]\n}\n</code></pre><li><h4 id=crear-nuestro-archivo-postcssconfigjs>Crear nuestro archivo <code>postcss.config.js</code></h4><p><code>postcss-loader</code> usara esta configuracion, solo usaremos el plugin de autoprefixer.<pre><code class=language-js><span class=hljs-built_in>module</span>.exports = {\n  <span class=hljs-attr>plugins</span>: {\n    <span class=hljs-attr>autoprefixer</span>: {},\n  },\n}\n</code></pre><li><h4 id=crear-nuestro-archivo-webpackconfigjs>Crear nuestro archivo <code>webpack.config.js</code></h4><div class=tenor-gif-embed data-aspect-ratio=1.7744360902255638 data-postid=10383696 data-share-method=host data-width=100%><a href=https://tenor.com/view/ahora-si-viene-lo-chido-gif-10383696>Ahora Si GIF</a> from <a href=https://tenor.com/search/ahora-gifs>Ahora GIFs</a></div><br><p>Empezemos por importar algunos modulos, mas <a href=#1-instalar-dependencias>arriba</a> explique que hace cada modulo.<pre><code class=language-js><span class=hljs-keyword>const</span> path = <span class=hljs-built_in>require</span>(<span class=hljs-string>'path'</span>)\n<span class=hljs-keyword>const</span> webpack = <span class=hljs-built_in>require</span>(<span class=hljs-string>'webpack'</span>)\n<span class=hljs-keyword>const</span> HtmlWebpackPlugin = <span class=hljs-built_in>require</span>(<span class=hljs-string>'html-webpack-plugin'</span>)\n<span class=hljs-keyword>const</span> {CleanWebpackPlugin} = <span class=hljs-built_in>require</span>(<span class=hljs-string>'clean-webpack-plugin'</span>)\n<span class=hljs-keyword>const</span> MiniCssExtractPlugin = <span class=hljs-built_in>require</span>(<span class=hljs-string>'mini-css-extract-plugin'</span>)\n</code></pre><p>El archivo <code>webpack.config.js</code> debe exportar un objeto o una funcion devolviendo un objeto, usaremos la segunda, ya que de esta manera podremos saber si estamos en <code>development</code> o <code>production</code>.<pre><code class=language-js><span class=hljs-keyword>const</span> config = {}\n<span class=hljs-built_in>module</span>.exports = <span class=hljs-function>(<span class=hljs-params>env, argv</span>) =></span> {\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'development'</span>) {\n    <span class=hljs-comment>// <span class=hljs-doctag>TODO:</span> usar style-loader, es lo recomendado para usar HMR</span>\n    <span class=hljs-comment>// <span class=hljs-doctag>TODO:</span> habilitar HMR plugin</span>\n  }\n\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'production'</span>) {\n    <span class=hljs-comment>// <span class=hljs-doctag>TODO:</span> insertar `contenthash` en los archivos de salida, esto para tener `long term caching`</span>\n    <span class=hljs-comment>// <span class=hljs-doctag>TODO:</span> usar MiniCssExtractPlugin, para extraer todo nuestro CSS a un archivo CSS, de lo contrario nuestro CSS quedaria en los archivos JS</span>\n  }\n  <span class=hljs-keyword>return</span> config\n}\n</code></pre><p>La configuracion en comun que tiene <code>production</code> y <code>development</code> estara en el objeto <code>config</code>.<pre><code class=language-js><span class=hljs-keyword>const</span> config = {\n  <span class=hljs-comment>// el punto de entrada de nuestra APP, JS que se ejecutara en el BROWSER</span>\n  <span class=hljs-attr>entry</span>: <span class=hljs-string>'./src/index.js'</span>,\n  <span class=hljs-attr>output</span>: {\n    <span class=hljs-comment>// el nombre que le daremos al archivo de salida principal</span>\n    <span class=hljs-attr>filename</span>: <span class=hljs-string>'main.js'</span>,\n\n    <span class=hljs-comment>// donde se crearan los archivos de salida</span>\n    <span class=hljs-attr>path</span>: path.resolve(__dirname, <span class=hljs-string>'dist'</span>),\n  },\n\n  <span class=hljs-comment>// configuracion para webpack-dev-server</span>\n  <span class=hljs-attr>devServer</span>: {\n    <span class=hljs-comment>// abrir la APP en el BROWSER</span>\n    <span class=hljs-attr>open</span>: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// HACK para permitir ver la APP desde otros dispositivos</span>\n    <span class=hljs-attr>host</span>: <span class=hljs-string>'0.0.0.0'</span>,\n\n    <span class=hljs-comment>// ver el progreso de compilacion en la consola</span>\n    <span class=hljs-attr>progress</span>: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// esto para que todas las URLs que fallen (404) devuelvan nuestro index.html</span>\n    <span class=hljs-attr>historyApiFallback</span>: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// para que los errores en consola aparescan en un overlay en el BROWSER</span>\n    <span class=hljs-attr>overlay</span>: <span class=hljs-literal>true</span>,\n\n    <span class=hljs-comment>// habilitar HMR</span>\n    <span class=hljs-attr>hot</span>: <span class=hljs-literal>true</span>,\n  },\n  <span class=hljs-attr>resolve</span>: {\n    <span class=hljs-attr>alias</span>: {\n      <span class=hljs-comment>// un alias que apunta a la carpeta `src/components`</span>\n      <span class=hljs-string>'@components'</span>: path.resolve(__dirname, <span class=hljs-string>'src/components'</span>),\n    },\n  },\n  <span class=hljs-attr>module</span>: {\n    <span class=hljs-attr>rules</span>: [\n      {\n        <span class=hljs-comment>// a que archivos afectara esta regla</span>\n        <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.js$/</span>,\n\n        <span class=hljs-comment>// los loaders que apliquemos en la regla no afectaran</span>\n        <span class=hljs-comment>// a archivos que coincidan con</span>\n        exclude: <span class=hljs-regexp>/(node_modules|bower_components)/</span>,\n\n        use: {\n          <span class=hljs-comment>// el nombre  del loader que usaremos</span>\n          <span class=hljs-attr>loader</span>: <span class=hljs-string>'babel-loader'</span>,\n          <span class=hljs-attr>options</span>: {\n            <span class=hljs-comment>// mejora la velocidad de compilacion</span>\n            <span class=hljs-comment>// si en algun momento no se ven reflejados tus cambios</span>\n            <span class=hljs-comment>// elimina la carpeta `node_modules/.cache`</span>\n            <span class=hljs-attr>cacheDirectory</span>: <span class=hljs-literal>true</span>,\n          },\n        },\n      },\n    ],\n  },\n  <span class=hljs-attr>plugins</span>: [\n    <span class=hljs-keyword>new</span> CleanWebpackPlugin(),\n    <span class=hljs-keyword>new</span> HtmlWebpackPlugin({\n      <span class=hljs-comment>// la ruta donde se encuentra nuestro index.html</span>\n      <span class=hljs-comment>// para que HtmlWebpackPlugin lo use</span>\n      <span class=hljs-attr>template</span>: <span class=hljs-string>'src/index.html'</span>,\n    }),\n  ],\n}\n</code></pre><p>Ahora solo falta completar nuestros TODOs<pre><code class=language-js><span class=hljs-built_in>module</span>.exports = <span class=hljs-function>(<span class=hljs-params>env, argv</span>) =></span> {\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'development'</span>) {\n    <span class=hljs-comment>// nuestra regla para poder importar archivos CSS</span>\n    config.module.rules.push({\n      <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.css$/</span>,\n\n      <span class=hljs-comment>// el primer loader en aplicarse es el ultimo, en este caso `postcss-loader`</span>\n      use: [<span class=hljs-string>'style-loader'</span>, <span class=hljs-string>'css-loader'</span>, <span class=hljs-string>'postcss-loader'</span>],\n    })\n    config.plugins.push(\n      <span class=hljs-comment>// con esto ya habilitamos HMR</span>\n      <span class=hljs-keyword>new</span> webpack.HotModuleReplacementPlugin(),\n    )\n  }\n\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'production'</span>) {\n    <span class=hljs-comment>// webpack reemplazara [name] con el nombre del archivo que importamos, ///</span>\n    <span class=hljs-comment>// [contenthash:8] sera reemplazado por un hash de 8 digitos que cambia segun el contenido del archivo</span>\n    <span class=hljs-comment>// aplicar long term caching a los archivos resultantes JS</span>\n    config.output.filename = <span class=hljs-string>'static/js/bundle.[name].[contenthash:8].js'</span>\n    config.output.chunkFilename = <span class=hljs-string>'static/js/chunk.[name].[contenthash:8].js'</span>\n\n    <span class=hljs-comment>// nuestra regla para extraer los archivos CSSs en sus propios archivos</span>\n    config.module.rules.push({\n      <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.css$/</span>,\n      use: [MiniCssExtractPlugin.loader, <span class=hljs-string>'css-loader'</span>, <span class=hljs-string>'postcss-loader'</span>],\n    })\n    config.plugins.push(\n      <span class=hljs-keyword>new</span> MiniCssExtractPlugin({\n        <span class=hljs-comment>// aplicar long term caching a los archivos resultantes CSS</span>\n        <span class=hljs-attr>filename</span>: <span class=hljs-string>'static/css/bundle.[name].[contenthash:8].css'</span>,\n        <span class=hljs-attr>chunkFilename</span>: <span class=hljs-string>'static/css/chunk.[name].[contenthash:8].css'</span>,\n      }),\n    )\n  }\n  <span class=hljs-keyword>return</span> config\n}\n</code></pre></ol><p>Con esto ya tienes una configuracion bien estandar, si trabajas con vue puedes continuar <a href=https://vue-loader.vuejs.org/ rel=nofollow target=_blank>aquí</a>, o si trabajas con react agrega este preset <a href=https://babeljs.io/docs/en/babel-preset-react rel=nofollow target=_blank>@babel/preset-react</a> a la configuracion de babel.<h2 id=configuracion-final>Configuracion final</h2><pre><code class=language-js><span class=hljs-comment>// webpack.config.js</span>\n\n<span class=hljs-keyword>const</span> path = <span class=hljs-built_in>require</span>(<span class=hljs-string>'path'</span>)\n<span class=hljs-keyword>const</span> webpack = <span class=hljs-built_in>require</span>(<span class=hljs-string>'webpack'</span>)\n<span class=hljs-keyword>const</span> HtmlWebpackPlugin = <span class=hljs-built_in>require</span>(<span class=hljs-string>'html-webpack-plugin'</span>)\n<span class=hljs-keyword>const</span> {CleanWebpackPlugin} = <span class=hljs-built_in>require</span>(<span class=hljs-string>'clean-webpack-plugin'</span>)\n<span class=hljs-keyword>const</span> MiniCssExtractPlugin = <span class=hljs-built_in>require</span>(<span class=hljs-string>'mini-css-extract-plugin'</span>)\n\n<span class=hljs-keyword>const</span> config = {\n  <span class=hljs-attr>entry</span>: <span class=hljs-string>'./src/index.js'</span>,\n  <span class=hljs-attr>output</span>: {\n    <span class=hljs-attr>filename</span>: <span class=hljs-string>'main.js'</span>,\n    <span class=hljs-attr>path</span>: path.resolve(__dirname, <span class=hljs-string>'dist'</span>),\n  },\n  <span class=hljs-attr>devServer</span>: {\n    <span class=hljs-attr>open</span>: <span class=hljs-literal>true</span>,\n    <span class=hljs-attr>host</span>: <span class=hljs-string>'0.0.0.0'</span>,\n    <span class=hljs-attr>progress</span>: <span class=hljs-literal>true</span>,\n    <span class=hljs-attr>historyApiFallback</span>: <span class=hljs-literal>true</span>,\n    <span class=hljs-attr>overlay</span>: <span class=hljs-literal>true</span>,\n    <span class=hljs-attr>hot</span>: <span class=hljs-literal>true</span>,\n  },\n  <span class=hljs-attr>resolve</span>: {\n    <span class=hljs-attr>alias</span>: {\n      <span class=hljs-string>'@components'</span>: path.resolve(__dirname, <span class=hljs-string>'src/components'</span>),\n    },\n  },\n  <span class=hljs-attr>module</span>: {\n    <span class=hljs-attr>rules</span>: [\n      {\n        <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.js$/</span>,\n        exclude: <span class=hljs-regexp>/(node_modules|bower_components)/</span>,\n        use: {\n          <span class=hljs-attr>loader</span>: <span class=hljs-string>'babel-loader'</span>,\n          <span class=hljs-attr>options</span>: {\n            <span class=hljs-attr>cacheDirectory</span>: <span class=hljs-literal>true</span>,\n          },\n        },\n      },\n    ],\n  },\n  <span class=hljs-attr>plugins</span>: [\n    <span class=hljs-keyword>new</span> CleanWebpackPlugin(),\n    <span class=hljs-keyword>new</span> HtmlWebpackPlugin({\n      <span class=hljs-attr>template</span>: <span class=hljs-string>'src/index.html'</span>,\n    }),\n  ],\n}\n\n<span class=hljs-built_in>module</span>.exports = <span class=hljs-function>(<span class=hljs-params>env, argv</span>) =></span> {\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'development'</span>) {\n    config.module.rules.push({\n      <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.css$/</span>,\n      use: [<span class=hljs-string>'style-loader'</span>, <span class=hljs-string>'css-loader'</span>, <span class=hljs-string>'postcss-loader'</span>],\n    })\n    config.plugins.push(<span class=hljs-keyword>new</span> webpack.HotModuleReplacementPlugin())\n  }\n\n  <span class=hljs-keyword>if</span> (argv.mode === <span class=hljs-string>'production'</span>) {\n    config.output.filename = <span class=hljs-string>'static/js/bundle.[name].[contenthash:8].js'</span>\n    config.output.chunkFilename = <span class=hljs-string>'static/js/chunk.[name].[contenthash:8].js'</span>\n    config.module.rules.push({\n      <span class=hljs-attr>test</span>: <span class=hljs-regexp>/\\.css$/</span>,\n      use: [MiniCssExtractPlugin.loader, <span class=hljs-string>'css-loader'</span>, <span class=hljs-string>'postcss-loader'</span>],\n    })\n    config.plugins.push(\n      <span class=hljs-keyword>new</span> MiniCssExtractPlugin({\n        <span class=hljs-attr>filename</span>: <span class=hljs-string>'static/css/bundle.[name].[contenthash:8].css'</span>,\n        <span class=hljs-attr>chunkFilename</span>: <span class=hljs-string>'static/css/chunk.[name].[contenthash:8].css'</span>,\n      }),\n    )\n  }\n  <span class=hljs-keyword>return</span> config\n}\n</code></pre><h2 id=referencias>Referencias</h2><ul><li><a href=https://www.zzuu666.com/articles/9 rel=nofollow target=_blank>https://www.zzuu666.com/articles/9</a><li><a href=https://webpack.js.org/configuration/mode/#root rel=nofollow target=_blank>https://webpack.js.org/configuration/mode/#root</a><li><a href=https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching rel=nofollow target=_blank>https://developers.google.com/web/fundamentals/performance/webpack/use-long-term-caching</a></ul>"}}}},"router":{"location":{"pathname":"/blog/configurar-webpack-5","search":"","hash":"","key":"yv61py","query":{}},"action":"POP"}};</script><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").catch(function(r){console.warn(r)})</script><script type="text/javascript">!function(i){function e(e){for(var a,t,r=e[0],n=e[1],d=e[2],o=0,c=[];o<r.length;o++)t=r[o],Object.prototype.hasOwnProperty.call(u,t)&&u[t]&&c.push(u[t][0]),u[t]=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a]);for(m&&m(e);c.length;)c.shift()();return l.push.apply(l,d||[]),f()}function f(){for(var e,a=0;a<l.length;a++){for(var t=l[a],r=!0,n=1;n<t.length;n++){var d=t[n];0!==u[d]&&(r=!1)}r&&(l.splice(a--,1),e=p(p.s=t[0]))}return e}var t={},s={24:0},u={24:0},l=[];function p(e){if(t[e])return t[e].exports;var a=t[e]={i:e,l:!1,exports:{}};return i[e].call(a.exports,a,a.exports,p),a.l=!0,a.exports}p.e=function(l){var e=[];s[l]?e.push(s[l]):0!==s[l]&&{22:1}[l]&&e.push(s[l]=new Promise(function(e,r){for(var a="static/css/chunk."+({1:"data.ai.draft",2:"data.como-mejorar-el-posicionamiento-seo-de-tu-sitio-web",3:"data.configurar-webpack-5",4:"data.dart-para-javascript-developers",5:"data.fixbrand",6:"data.gean-marroquin",7:"data.hiring.draft",8:"data.implementar-dark-theme.draft",9:"data.la-glorieta",10:"data.machine-learning.draft",11:"data.math.draft",12:"data.nombrar-variables.draft",13:"data.posts",14:"data.python-para-javascript-developers",15:"data.que-es-docker.draft",16:"data.ricarica-travel",17:"data.template.draft",18:"data.works",19:"data.yilancorp",22:"vendors~katex",23:"vendors~platform"}[l]||l)+"."+{1:"31d6cfe0",2:"31d6cfe0",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0",19:"31d6cfe0",22:"56f90a90",23:"31d6cfe0",25:"31d6cfe0",26:"31d6cfe0",27:"31d6cfe0"}[l]+".css",n=p.p+a,t=document.getElementsByTagName("link"),d=0;d<t.length;d++){var o=(i=t[d]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===a||o===n))return e()}var c=document.getElementsByTagName("style");for(d=0;d<c.length;d++){var i;if((o=(i=c[d]).getAttribute("data-href"))===a||o===n)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var a=e&&e.target&&e.target.src||n,t=new Error("Loading CSS chunk "+l+" failed.\n("+a+")");t.code="CSS_CHUNK_LOAD_FAILED",t.request=a,delete s[l],f.parentNode.removeChild(f),r(t)},f.href=n,document.getElementsByTagName("head")[0].appendChild(f)}).then(function(){s[l]=0}));var t=u[l];if(0!==t)if(t)e.push(t[2]);else{var a=new Promise(function(e,a){t=u[l]=[e,a]});e.push(t[2]=a);var r,n=document.createElement("script");n.charset="utf-8",n.timeout=120,p.nc&&n.setAttribute("nonce",p.nc),n.src=p.p+"static/js/chunk."+({1:"data.ai.draft",2:"data.como-mejorar-el-posicionamiento-seo-de-tu-sitio-web",3:"data.configurar-webpack-5",4:"data.dart-para-javascript-developers",5:"data.fixbrand",6:"data.gean-marroquin",7:"data.hiring.draft",8:"data.implementar-dark-theme.draft",9:"data.la-glorieta",10:"data.machine-learning.draft",11:"data.math.draft",12:"data.nombrar-variables.draft",13:"data.posts",14:"data.python-para-javascript-developers",15:"data.que-es-docker.draft",16:"data.ricarica-travel",17:"data.template.draft",18:"data.works",19:"data.yilancorp",22:"vendors~katex",23:"vendors~platform"}[l]||l)+"."+{1:"74a6ea0a",2:"38ed0796",3:"1ebda928",4:"c0673889",5:"e7097b2b",6:"17d2bd49",7:"2f636fe9",8:"c9194663",9:"9244f8ce",10:"2d004647",11:"b4c42e72",12:"c8e51a85",13:"91065480",14:"6e923ffc",15:"807c28f9",16:"d9ad5e1e",17:"76d1f7f8",18:"8dfad95e",19:"28611456",22:"91db07ce",23:"f5ce15ed",25:"8b64eee6",26:"10c4bb19",27:"f83d2af9"}[l]+".js";var d=new Error;r=function(e){n.onerror=n.onload=null,clearTimeout(o);var a=u[l];if(0!==a){if(a){var t=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;d.message="Loading chunk "+l+" failed.\n("+t+": "+r+")",d.name="ChunkLoadError",d.type=t,d.request=r,a[1](d)}u[l]=void 0}};var o=setTimeout(function(){r({type:"timeout",target:n})},12e4);n.onerror=n.onload=r,document.head.appendChild(n)}return Promise.all(e)},p.m=i,p.c=t,p.d=function(e,a,t){p.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},p.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.t=function(a,e){if(1&e&&(a=p(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(p.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var r in a)p.d(t,r,function(e){return a[e]}.bind(null,r));return t},p.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return p.d(a,"a",a),a},p.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},p.p="/",p.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var n=0;n<a.length;n++)e(a[n]);var m=r;f()}([])</script><script type="text/javascript" src="/static/js/chunk.react.26d293b4.js"></script><script type="text/javascript" src="/static/js/chunk.vendor.19e4b5bf.js"></script><script type="text/javascript" src="/static/js/chunk.app.a256acce.js"></script></body></html>