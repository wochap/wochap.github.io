<!DOCTYPE html>
<html lang="<%= process.env.SSG_LANG %>">
  <head>
    <meta charset="utf-8" />
    <meta name="theme-color" content="#000000" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="<%= process.env.SSG_LANG === 'es' ? 'es_LA' : 'en_US' %>" />
    <% if (process.env.SSG_LANG === 'es') { %>
    <meta property="og:locale:alternate" content="en_US" />
    <% } else { %>
    <meta property="og:locale:alternate" content="es_LA" />
    <% } %>
    <!-- put title tag in Helmet component -->
    <!-- put description meta tag in Helmet component -->
    <!-- put og meta tags in Helmet component -->
    <% if (process.env.NODE_ENV !== 'development') { %>
    <link rel="manifest" href="/app-manifest.json" />
    <% } %>
  </head>
  <body>
    <script>
      // source: https://github.com/insin/gatsby-plugin-dark-mode/blob/master/gatsby-ssr.js
      void (function () {
        if (typeof window.CustomEvent !== "function") {
          return;
        }
        window.__onThemeChange = function () {}
        window.__themeChangeEvent = 'themeChange'
        var event = new CustomEvent(__themeChangeEvent)
        var preferredTheme
        try {
          preferredTheme = localStorage.getItem('theme')
        } catch (err) {}

        function setTheme(newTheme) {
          if (preferredTheme && document.body.classList.contains(preferredTheme)) {
            document.body.classList.replace(preferredTheme, newTheme)
          } else {
            document.body.classList.add(newTheme)
          }
          window.__theme = newTheme
          preferredTheme = newTheme
          window.__onThemeChange(newTheme)
          document.dispatchEvent(event)
        }
        window.__setPreferredTheme = function (newTheme) {
          setTheme(newTheme)
          try {
            localStorage.setItem('theme', newTheme)
          } catch (err) {}
        }
        var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
        darkQuery.addListener(function (e) {
          window.__setPreferredTheme(e.matches ? 'dark' : 'light')
        })
        setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
      })()
    </script>

    <div id="root"></div>

    <!-- register service-worker generated by sw-precache -->
    <% if (process.env.NODE_ENV !== 'development') { %>
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js').catch(function (ex) {
          console.warn(ex)
        })
      }
    </script>
    <% } %>

    <!-- add the webpack manifest -->
    <%= htmlWebpackPlugin.files.webpackManifest %>
  </body>
</html>
